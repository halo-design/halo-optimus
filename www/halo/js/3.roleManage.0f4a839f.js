webpackJsonp([3],{794:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r,l,o,i,c,u,s,d,m,p=n(838),f=(n.n(p),n(415)),h=n.n(f),g=n(0),b=n.n(g),v=h.a.TreeNode,y=function e(t){return t.children.length>=1?b.a.createElement(v,{key:t.roleId,title:t.roleName},t.children.map(e)):b.a.createElement(v,{key:t.roleId,title:t.roleName,isLeaf:!0})},E=function(e){var t=e.selected,n=e.roleList,a=e.selectedKeys;return n?b.a.createElement("div",{className:"app-barnch-tree"},b.a.createElement(h.a,{showLine:!0,autoExpandParent:!0,selectedKeys:a||[],onSelect:function(e,n){t({roleId:e[0],title:n.node.props.title})}},n.map(y))):null},k=n(400),S=(n.n(k),n(171)),I=n.n(S),R=n(826),C=(n.n(R),n(404)),N=n.n(C),z=n(827),_=(n.n(z),n(405)),w=n.n(_),F=n(805),M=(n.n(F),n(402)),x=n.n(M),O=n(399),V=(n.n(O),n(70)),A=n.n(V),B=n(3),P=n.n(B),T=n(105),j=(n.n(T),n(84)),D=n.n(j),K=n(30),L=n.n(K),q=n(4),W=n.n(q),H=n(7),J=n.n(H),Q=n(5),U=n.n(Q),G=n(6),X=n.n(G),Y=n(834),Z=(n.n(Y),n(407)),$=n.n(Z),ee=n(806),te=(n.n(ee),n(107)),ne=n.n(te),ae=n(809),re=(n.n(ae),n(401)),le=n.n(re),oe=n(0),ie=n.n(oe),ce=n(37),ue=n(32),se=n(812),de=n(409),me=le.a.Item,pe=ne.a.Option,fe=$.a.SHOW_PARENT,he=(a=Object(ce.b)(function(e){return{treeNodes:e.public.bindRole.selectRoleTreeList,visible:e.pages.roleManage.addBoxVisible}},function(e){return Object(ue.b)({setAddRoleBoxVisible:de.setAddRoleBoxVisible,addRole:de.addRole},e)}),r=le.a.create(),a(l=r(l=function(e){function t(e){W()(this,t);var n=U()(this,(t.__proto__||L()(t)).call(this,e));return n.state={loading:!1},n}return X()(t,e),J()(t,[{key:"componentWillMount",value:function(){this.props.form.resetFields()}},{key:"onClose",value:function(){this.props.setAddRoleBoxVisible(!1),this.onClear()}},{key:"onClear",value:function(){this.props.form.resetFields()}},{key:"onSubmit",value:function(){var e=this,t=this.props,n=t.form,a=t.addRole,r=n.getFieldsValue;(0,n.validateFields)(function(t,n){if(t)D.a.error("请正确填写内容！");else{var l=r();for(var o in l){var i=l[o];l[o]=i||""}l=P()({},l,{rolePName:""});var c=function(){e.setState({loading:!1})};!function(){e.setState({loading:!0})}(),a(l,function(){e.onClear(),e.onClose(),c()},c)}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.form,a=t.treeNodes,r=t.visible,l=n.getFieldDecorator,o={labelCol:{span:6},wrapperCol:{span:17}},i={dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:a,placeholder:"请选择所属角色",treeDefaultExpandAll:!0,treeCheckStrictly:!1,treeCheckable:!1,showCheckedStrategy:fe};return ie.a.createElement("div",{className:"AddRoleBox"},ie.a.createElement(I.a,{title:"添加角色",width:600,visible:r,onOk:this.onSubmit,onCancel:function(t){return e.onClose()},footer:[ie.a.createElement(A.a,{key:"back",type:"ghost",size:"large",onClick:function(t){return e.onClose()}},"返 回"),ie.a.createElement(A.a,{key:"clean",type:"ghost",size:"large",onClick:function(t){return e.onClear()}},"清除所有"),ie.a.createElement(A.a,{key:"submit",type:"primary",size:"large",onClick:function(t){return e.onSubmit()}},"提 交")]},ie.a.createElement(le.a,{layout:"horizontal"},ie.a.createElement(N.a,null,ie.a.createElement(w.a,{span:11},ie.a.createElement(me,P()({label:"角色名："},o,{required:!0}),l("roleName",{rules:[{required:!0,message:"请输入角色名"}]})(ie.a.createElement(x.a,{placeholder:"请输入角色名",size:"large"}))),ie.a.createElement(me,P()({label:"状态："},o,{required:!0}),l("roleStatus",{rules:[{required:!0,message:"请选择状态"}]})(ie.a.createElement(ne.a,{placeholder:"请选择状态"},ie.a.createElement(pe,{value:"1"},"可用"),ie.a.createElement(pe,{value:"0"},"禁用"))))),ie.a.createElement(w.a,{span:13},ie.a.createElement(me,P()({label:"角色描述："},o),l("roleDesc")(ie.a.createElement(x.a,{placeholder:"请输入角色描述",size:"large"}))),ie.a.createElement(me,P()({label:"所属角色："},o),l("rolePId")(ie.a.createElement($.a,P()({},i,{allowClear:!0}))))))),ie.a.createElement(se.a,{loading:this.state.loading})))}}]),t}(ie.a.Component))||l)||l),ge=n(400),be=(n.n(ge),n(171)),ve=n.n(be),ye=n(813),Ee=(n.n(ye),n(403)),ke=n.n(Ee),Se=n(399),Ie=(n.n(Se),n(70)),Re=n.n(Ie),Ce=n(30),Ne=n.n(Ce),ze=n(4),_e=n.n(ze),we=n(7),Fe=n.n(we),Me=n(5),xe=n.n(Me),Oe=n(6),Ve=n.n(Oe),Ae=n(3),Be=n.n(Ae),Pe=n(0),Te=n.n(Pe),je=n(37),De=n(32),Ke=n(812),Le=n(409),qe=(o=Object(je.b)(function(e){var t=e.pages.roleManage,n=t.bindBoxVisible;return{pageSize:t.pageSize,visible:n,totalSize:t.allMenuTotalSize,curPage:t.allMenuFnCurPage,selectKeys:t.allMenuFnSelectKeys,dataSource:t.allMenuFnCurPageItems,curRoleId:t.curRoleInfo.roleId}},function(e){return Object(De.b)(Be()({},Le),e)}))(i=function(e){function t(e){_e()(this,t);var n=xe()(this,(t.__proto__||Ne()(t)).call(this,e));return n.state={loading:!1},n}return Ve()(t,e),Fe()(t,[{key:"onClose",value:function(){this.props.setBindRoleBoxVisible(!1)}},{key:"onSubmit",value:function(){var e=this,t=this.props,n=t.curRoleId,a=t.selectKeys,r=t.itemsBindRole,l=[];a.map(function(e){l.push({menuItemId:e})});var o=function(){e.setState({loading:!1})};!function(){e.setState({loading:!0})}(),r(n,l,function(){o(),e.onClose()},o)}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,a=t.getAllRoleFnItems,r=t.totalSize,l=t.pageSize,o=t.curPage,i=t.curRoleId,c=t.selectKeys,u=t.dataSource,s=t.setAllMenuFnSelectKeys,d=[{title:"菜单名称",dataIndex:"menuName",key:"menuName"},{title:"功能名称",dataIndex:"menuItemName",key:"menuItemName"}],m={total:Number(r),showQuickJumper:!0,pageSize:l,current:o,onChange:function(e){a(e,i,"")}},p={selectedRowKeys:c,onChange:function(e){var t=[].concat(e);s(t)}};return Te.a.createElement("div",{className:"BindRoleBox"},Te.a.createElement(ve.a,{title:"关联功能",width:600,visible:n,onOk:this.onSubmit,onCancel:function(t){return e.onClose()},footer:[Te.a.createElement(Re.a,{key:"back",type:"ghost",size:"large",onClick:function(t){return e.onClose()}},"返 回"),Te.a.createElement(Re.a,{key:"submit",type:"primary",size:"large",onClick:function(t){return e.onSubmit()}},"保存")]},Te.a.createElement("div",{className:"app-narrow-table"},Te.a.createElement(ke.a,{columns:d,bordered:!0,rowSelection:p,dataSource:u,pagination:m})),Te.a.createElement(Ke.a,{loading:this.state.loading})))}}]),t}(Te.a.Component))||i,We=n(826),He=(n.n(We),n(404)),Je=n.n(He),Qe=n(827),Ue=(n.n(Qe),n(405)),Ge=n.n(Ue),Xe=n(805),Ye=(n.n(Xe),n(402)),Ze=n.n(Ye),$e=n(399),et=(n.n($e),n(70)),tt=n.n(et),nt=n(105),at=(n.n(nt),n(84)),rt=n.n(at),lt=n(30),ot=n.n(lt),it=n(4),ct=n.n(it),ut=n(7),st=n.n(ut),dt=n(5),mt=n.n(dt),pt=n(6),ft=n.n(pt),ht=n(3),gt=n.n(ht),bt=n(834),vt=(n.n(bt),n(407)),yt=n.n(vt),Et=n(806),kt=(n.n(Et),n(107)),St=n.n(kt),It=n(809),Rt=(n.n(It),n(401)),Ct=n.n(Rt),Nt=n(400),zt=(n.n(Nt),n(171)),_t=n.n(zt),wt=n(0),Ft=n.n(wt),Mt=n(37),xt=n(32),Ot=n(106),Vt=n(409),At=_t.a.confirm,Bt=Ct.a.Item,Pt=St.a.Option,Tt=yt.a.SHOW_PARENT,jt=(c=Object(Mt.b)(function(e){var t=e.pages.roleManage,n=t.curRoleInfo,a=t.selectModifyRole,r=e.public;return{userMenu:r.menu.userMenu,treeNodes:r.bindRole.selectRoleTreeList,info:n,selectModifyRole:a}},function(e){return Object(xt.b)(gt()({},Vt),e)}),u=Ct.a.create(),c(s=u(s=function(e){function t(e){ct()(this,t);var n=mt()(this,(t.__proto__||ot()(t)).call(this,e));return n.state={currentId:""},n}return ft()(t,e),st()(t,[{key:"setChangeState",value:function(e){e!==this.state.currentId&&(this.props.form.resetFields(),this.setState({currentId:e}))}},{key:"addNewRole",value:function(){this.props.setAddRoleBoxVisible(!0)}},{key:"bindRole",value:function(){var e=this.props,t=e.info,n=e.setBindRoleBoxVisible;if(!t.roleId)return void rt.a.error("请先选择一个角色！");n(!0)}},{key:"deleteRole",value:function(){var e=this.props,t=e.info,n=e.delRole;if(!t.roleId)return void rt.a.error("请先选择一个角色！");At({title:"删除角色",content:"是否确认删除角色？",onOk:function(){n(t.roleId)}})}},{key:"saveModify",value:function(){var e=this.props,t=e.form,n=e.info,a=e.selectModifyRole,r=e.updateRole,l=t.getFieldsValue,o=t.validateFields,i=t.resetFields;if(!n.roleId)return void rt.a.error("请先选择一个角色！");o(function(e,t){e?(rt.a.error("请正确填写内容！"),i()):a===n.roleId?rt.a.error("不可选择该角色为所属角色！"):r(gt()({},l(),{roleId:n.roleId||"",rolePId:a||""}))})}},{key:"componentWillReceiveProps",value:function(e){this.setChangeState(e.info.roleId)}},{key:"render",value:function(){var e=this,t=this.props,n=t.form,a=t.treeNodes,r=t.info,l=t.selectModifyRole,o=t.setSelectTreeVal,i=t.userMenu,c=n.getFieldDecorator,u={labelCol:{span:6},wrapperCol:{span:17}},s=Ft.a.createElement(tt.a,{size:"large",onClick:function(t){return e.saveModify()}},"保存修改"),d=Ft.a.createElement(tt.a,{size:"large",type:"ghost",onClick:function(t){return e.bindRole()}},"关联功能"),m=Ft.a.createElement(tt.a,{size:"large",type:"primary",onClick:function(t){return e.addNewRole()}},"添加角色"),p=Ft.a.createElement(tt.a,{size:"large",type:"danger",onClick:function(t){return e.deleteRole()}},"删除角色"),f=function(e){o(e)},h={dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:a,onChange:f,value:l,placeholder:"请选择所属角色",treeDefaultExpandAll:!0,treeCheckStrictly:!1,treeCheckable:!1,showCheckedStrategy:Tt};return Ft.a.createElement("div",{className:"app-search-panel"},Ft.a.createElement(Ct.a,{layout:"horizontal"},Ft.a.createElement(Je.a,null,Ft.a.createElement(Ge.a,{span:11},Ft.a.createElement(Bt,gt()({label:"角色名："},u,{required:!0}),c("roleName",{initialValue:r.roleName,rules:[{required:!0,message:"请输入角色名"}]})(Ft.a.createElement(Ze.a,{placeholder:"请输入角色名",size:"large"}))),Ft.a.createElement(Bt,gt()({label:"状态："},u,{required:!0}),c("roleStatus",{initialValue:r.roleStatus,rules:[{required:!0,message:"请选择状态"}]})(Ft.a.createElement(St.a,{placeholder:"请选择状态"},Ft.a.createElement(Pt,{value:"1"},"可用"),Ft.a.createElement(Pt,{value:"0"},"禁用"))))),Ft.a.createElement(Ge.a,{span:13},Ft.a.createElement(Bt,gt()({label:"角色描述："},u),c("roleDesc",{initialValue:r.roleDesc})(Ft.a.createElement(Ze.a,{placeholder:"请输入角色描述",size:"large"}))),Ft.a.createElement(Bt,gt()({label:"所属角色："},u),Ft.a.createElement(yt.a,gt()({},h,{allowClear:!0}))))),Ft.a.createElement("div",{className:"button-group"},Object(Ot.c)(i,[{item:"F002",button:s},{item:"F009",button:d},{item:"F001",button:m},{item:"F004",button:p}],!0))),Ft.a.createElement(he,null),Ft.a.createElement(qe,null))}}]),t}(Ft.a.Component))||s)||s),Dt=n(813),Kt=(n.n(Dt),n(403)),Lt=n.n(Kt),qt=n(30),Wt=n.n(qt),Ht=n(4),Jt=n.n(Ht),Qt=n(7),Ut=n.n(Qt),Gt=n(5),Xt=n.n(Gt),Yt=n(6),Zt=n.n(Yt),$t=n(0),en=n.n($t),tn=n(37),nn=n(32),an=n(409),rn=(d=Object(tn.b)(function(e){var t=e.pages.roleManage;return{pageSize:t.pageSize,totalSize:t.tableTotalSize,curPage:t.tableCurPage,dataSource:t.tableCurPageItems,curRoleId:t.curRoleInfo.roleId}},function(e){return Object(nn.b)({getAllRoleFnItems:an.getAllRoleFnItems,clearTableItems:an.clearTableItems},e)}))(m=function(e){function t(){return Jt()(this,t),Xt()(this,(t.__proto__||Wt()(t)).apply(this,arguments))}return Zt()(t,e),Ut()(t,[{key:"componentWillUnmount",value:function(){this.props.clearTableItems()}},{key:"render",value:function(){var e=this.props,t=e.getAllRoleFnItems,n=e.totalSize,a=e.pageSize,r=e.curPage,l=e.curRoleId,o=e.dataSource,i=[{title:"菜单名称",dataIndex:"menuName",key:"menuName"},{title:"功能名称",dataIndex:"menuItemName",key:"menuItemName"}],c={total:Number(n),showQuickJumper:!0,pageSize:a,current:r,onChange:function(e){t(e,l,"",1)}};return en.a.createElement(Lt.a,{columns:i,bordered:!0,dataSource:o,pagination:c})}}]),t}(en.a.Component))||m;n.d(t,"default",function(){return On});var ln,on,cn=n(826),un=(n.n(cn),n(404)),sn=n.n(un),dn=n(827),mn=(n.n(dn),n(405)),pn=n.n(mn),fn=n(30),hn=n.n(fn),gn=n(4),bn=n.n(gn),vn=n(7),yn=n.n(vn),En=n(5),kn=n.n(En),Sn=n(6),In=n.n(Sn),Rn=n(3),Cn=n.n(Rn),Nn=n(0),zn=n.n(Nn),_n=n(37),wn=n(32),Fn=n(835),Mn=n(174),xn=n(409),On=(ln=Object(_n.b)(function(e){return{roleTreeList:e.public.bindRole.roleTreeList,curRoleId:e.pages.roleManage.curRoleInfo.roleId}},function(e){return Object(wn.b)(Cn()({},xn,{getRoleTree:Mn.b}),e)}))(on=function(e){function t(e){bn()(this,t);var n=kn()(this,(t.__proto__||hn()(t)).call(this,e));return n.onSearch=n.onSearch.bind(n),n.roleSelected=n.roleSelected.bind(n),n}return In()(t,e),yn()(t,[{key:"onSearch",value:function(e){(0,this.props.getInfoByRoleName)(e)}},{key:"roleSelected",value:function(e){var t=e.roleId,n=e.title,a=this.props,r=a.getAllRoleFnItems,l=a.getInfoByRoleId;r(1,t,n,1),r(1,t,n,2),r(1,t,n),l(t)}},{key:"componentWillMount",value:function(){this.props.getRoleTree()}},{key:"componentWillUnmount",value:function(){this.props.clearCurRoleInfo()}},{key:"render",value:function(){var e=this.props,t=e.roleTreeList,n=e.curRoleId;return zn.a.createElement("div",{className:"pageRoleManage"},zn.a.createElement(sn.a,null,zn.a.createElement(pn.a,{span:5},zn.a.createElement("div",{className:"app-left-side"},zn.a.createElement(Fn.a,{placeholder:"请输入角色名称",initialValue:"",onSearch:this.onSearch}),zn.a.createElement(E,{selectedKeys:[n],selected:this.roleSelected,roleList:t}))),zn.a.createElement(pn.a,{span:19},zn.a.createElement(jt,null),zn.a.createElement("div",{className:"app-narrow-table",style:{padding:"0 20px"}},zn.a.createElement(rn,null)))))}}]),t}(zn.a.Component))||on},805:function(e,t,n){"use strict";n(83),n(815)},806:function(e,t,n){"use strict";n(83),n(816),n(805)},807:function(e,t,n){"use strict";n(83),n(817)},808:function(e,t){},809:function(e,t,n){"use strict";n(83),n(824),n(825)},810:function(e,t,n){"use strict";n(83),n(818)},811:function(e,t,n){"use strict";n(83),n(814)},812:function(e,t,n){"use strict";var a=n(807),r=(n.n(a),n(172)),l=n.n(r),o=n(0),i=n.n(o);t.a=function(e){var t=e.loading;return i.a.createElement("div",{className:"app-spin"},i.a.createElement(l.a,{size:"large",spinning:t}))}},813:function(e,t,n){"use strict";n(83),n(819),n(810),n(811),n(820),n(807),n(822)},814:function(e,t){},815:function(e,t){},816:function(e,t){},817:function(e,t){},818:function(e,t){},819:function(e,t){},820:function(e,t,n){"use strict";n(83),n(821),n(399)},821:function(e,t){},822:function(e,t,n){"use strict";n(83),n(823),n(806),n(805)},823:function(e,t){},824:function(e,t){},825:function(e,t,n){"use strict";n(83),n(808)},826:function(e,t,n){"use strict";n(83),n(808)},827:function(e,t,n){"use strict";n(83),n(808)},828:function(e,t,n){"use strict";n(83)},834:function(e,t,n){"use strict";n(83),n(840),n(806),n(811)},835:function(e,t,n){"use strict";n.d(t,"a",function(){return F});var a,r,l=n(805),o=(n.n(l),n(402)),i=n.n(o),c=n(828),u=(n.n(c),n(25)),s=n.n(u),d=n(105),m=(n.n(d),n(84)),p=n.n(m),f=n(30),h=n.n(f),g=n(4),b=n.n(g),v=n(7),y=n.n(v),E=n(5),k=n.n(E),S=n(6),I=n.n(S),R=n(809),C=(n.n(R),n(401)),N=n.n(C),z=n(0),_=n.n(z),w=N.a.Item,F=(a=N.a.create())(r=function(e){function t(){return b()(this,t),k()(this,(t.__proto__||h()(t)).apply(this,arguments))}return I()(t,e),y()(t,[{key:"render",value:function(){var e=this.props,t=e.form,n=e.placeholder,a=e.initialValue,r=e.onSearch,l=t.getFieldDecorator,o=t.getFieldsValue;return _.a.createElement("div",{className:"app-input-search"},_.a.createElement(N.a,{layout:"inline"},_.a.createElement(w,null,l("keyword",{initialValue:a})(_.a.createElement(i.a,{addonAfter:_.a.createElement(s.a,{type:"search",onClick:function(e){var t=o().keyword;t.trim()?r(t):p.a.warning("请输入搜索关键字！")}}),placeholder:n})))))}}]),t}(z.Component))||r},838:function(e,t,n){"use strict";n(83),n(839),n(811)},839:function(e,t){},840:function(e,t){}});